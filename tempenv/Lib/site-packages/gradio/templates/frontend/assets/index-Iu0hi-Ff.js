const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Index-DESi4qmn.js","./i18n-BSEU4Bba.js","./i18n-Devek7b9.css","./StreamingBar-Ck4VV0Q5.js","./ScrollFade-Df4eOX7N.js","./MarkdownCode-B3eIh5Gl.js","./prism-python-BCCznRiZ.js","./MarkdownCode-CFsC0AwP.css","./ScrollFade--X35ErLD.css","./StreamingBar-K0YZHDYh.css","./Index-CI7BqPz-.css","./index-DZp2jo3y.js","./init.svelte-BibupnDS.js","./index-tFQomdd2.js","./utils.svelte-kG009vb9.js"])))=>i.map(i=>d[i]);
import*as ve from"./svelte/svelte_svelte.js";import{mount as Ee,unmount as _t}from"./svelte/svelte_svelte.js";import*as Se from"./svelte/svelte_animate.js";import*as $e from"./svelte/svelte_attachments.js";import*as ke from"./svelte/svelte_easing.js";import*as Re from"./svelte/svelte_internal_client.js";import*as Ae from"./svelte/svelte_internal_flags_async.js";import*as Oe from"./svelte/svelte_internal_flags_legacy.js";import*as Te from"./svelte/svelte_internal_flags_tracing.js";import*as Pe from"./svelte/svelte_internal_server.js";import*as Ce from"./svelte/svelte_legacy.js";import*as Le from"./svelte/svelte_motion.js";import*as Ne from"./svelte/svelte_reactivity.js";import*as xe from"./svelte/svelte_reactivity_window.js";import*as De from"./svelte/svelte_server.js";import*as Ie from"./svelte/svelte_store.js";import*as je from"./svelte/svelte_transition.js";import*as Ue from"./svelte/svelte_events.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const mt="modulepreload",gt=function(e,t){return new URL(e,t).href},qe={},K=function(t,s,n){let i=Promise.resolve();if(s&&s.length>0){let p=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=p(s.map(u=>{if(u=gt(u,n),u in qe)return;qe[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(n)for(let v=o.length-1;v>=0;v--){const h=o[v];if(h.href===u&&(!c||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=c?"stylesheet":mt,c||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),c)return new Promise((v,h)=>{m.addEventListener("load",v),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},wt="host",Ze="queue/data",yt="queue/join",ze="upload",bt="login",Me="config",vt="info",Et="runtime",St="sleeptime",$t="heartbeat",kt="component_server",Rt="reset",At="cancel",Ot="app_id",Ke="This application is currently busy. Please try again. ",G="Connection errored out. ",I="Could not resolve app config. ",Tt="Could not get space status. ",Pt="Could not get API info. ",pe="Space metadata could not be loaded. ",Ct="Invalid URL. A full URL path is required.",Lt="Not authorized to access this space. ",Ye="Invalid credentials. Could not login. ",Nt="Login credentials are required to access this space.",xt="File system access is only available in Node.js environments",Qe="Root URL not found in client config",Dt="Error uploading file";async function Be(e,t,s){try{return(await(await fetch(`https://huggingface.co/api/spaces/${e}/jwt`,{headers:{Authorization:`Bearer ${t}`,...s?{Cookie:s}:{}}})).json()).token||!1}catch{return!1}}function It(e){let t={};return e.forEach(({api_name:s,id:n})=>{s&&(t[s]=n)}),t}async function jt(e){const t=this.options.token?{Authorization:`Bearer ${this.options.token}`}:{};t["Content-Type"]="application/json",typeof window<"u"&&window?.gradio_config?.current_page&&(e=e.substring(0,e.lastIndexOf("/")));let s=tt(e,this.deep_link?Me+"?deep_link="+this.deep_link:Me);const n=await this.fetch(s,{headers:t,credentials:"include"}),i=await Ut(n,!!this.options.auth);return typeof window<"u"&&window?.BUILD_MODE==="dev"&&(i.root=e||i.root),i}async function Ut(e,t){if(e?.status===401&&!t){const n=(await e.json())?.detail?.auth_message;throw new Error(n||Nt)}else if(e?.status===401&&t)throw new Error(Ye);if(e?.status===200){let s=await e.json();return s.dependencies?.forEach((n,i)=>{n.id===void 0&&(n.id=i)}),s}else if(e?.status===401)throw new Error(Lt);throw new Error(I)}async function qt(){const{http_protocol:e,host:t}=await fe(this.app_reference,this.options.token);try{if(this.options.auth){const s=await Xe(e,t,this.options.auth,this.fetch,this.options.token);s&&this.set_cookies(s)}}catch(s){throw Error(s.message)}}async function Xe(e,t,s,n,i){const r=new FormData;r.append("username",s?.[0]),r.append("password",s?.[1]);let o={};i&&(o.Authorization=`Bearer ${i}`);const a=await n(`${e}//${t}/${bt}`,{headers:o,method:"POST",body:r,credentials:"include"});if(a.status===200)return a.headers.get("set-cookie");throw a.status===401?new Error(Ye):new Error(pe)}function oe(e){if(e.startsWith("http")){const{protocol:t,host:s,pathname:n}=new URL(e);return{ws_protocol:t==="https:"?"wss":"ws",http_protocol:t,host:s+(n!=="/"?n:"")}}return{ws_protocol:"wss",http_protocol:"https:",host:new URL(e).host}}const et=e=>{let t=[];return e.split(/,(?=\s*[^\s=;]+=[^\s=;]+)/).forEach(n=>{const[i,r]=n.split(";")[0].split("=");i&&r&&t.push(`${i.trim()}=${r.trim()}`)}),t},he=/^[a-zA-Z0-9_\-\.]+\/[a-zA-Z0-9_\-\.]+$/,zt=/.*hf\.space\/{0,1}.*$/;async function fe(e,t){const s={};t&&(s.Authorization=`Bearer ${t}`);const n=e.trim().replace(/\/$/,"");if(he.test(n))try{const r=(await(await fetch(`https://huggingface.co/api/spaces/${n}/${wt}`,{headers:s})).json()).host;return{space_id:e,...oe(r)}}catch{throw new Error(pe)}if(zt.test(n)){const{ws_protocol:i,http_protocol:r,host:o}=oe(n);return{space_id:o.split("/")[0].replace(".hf.space",""),ws_protocol:i,http_protocol:r,host:o}}return{space_id:!1,...oe(n)}}const tt=(...e)=>{try{return e.reduce((t,s)=>(t=t.replace(/\/+$/,""),s=s.replace(/^\/+/,""),new URL(s,t+"/").toString()))}catch{throw new Error(Ct)}};function Mt(e,t,s){const n={named_endpoints:{},unnamed_endpoints:{}};return Object.keys(e).forEach(i=>{(i==="named_endpoints"||i==="unnamed_endpoints")&&(n[i]={},Object.entries(e[i]).forEach(([r,{parameters:o,returns:a}])=>{const l=t.dependencies.find(c=>c.api_name===r||c.api_name===r.replace("/",""))?.id||s[r.replace("/","")]||-1,p=l!==-1?t.dependencies.find(c=>c.id==l)?.types:{generator:!1,cancel:!1};if(l!==-1&&t.dependencies.find(c=>c.id==l)?.inputs?.length!==o.length){const c=t.dependencies.find(f=>f.id==l).inputs.map(f=>t.components.find(m=>m.id===f)?.type);try{c.forEach((f,m)=>{if(f==="state"){const v={component:"state",example:null,parameter_default:null,parameter_has_default:!0,parameter_name:null,hidden:!0};o.splice(m,0,v)}})}catch(f){console.error(f)}}const u=(c,f,m,v)=>({...c,description:Ft(c?.type,m),type:Bt(c?.type,f,m,v)||""});n[i][r]={parameters:o.map(c=>u(c,c?.component,c?.serializer,"parameter")),returns:a.map(c=>u(c,c?.component,c?.serializer,"return")),type:p}}))}),n}function Bt(e,t,s,n){if(t==="Api")return e.type;switch(e?.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}if(s==="JSONSerializable"||s==="StringSerializable")return"any";if(s==="ListStringSerializable")return"string[]";if(t==="Image")return n==="parameter"?"Blob | File | Buffer":"string";if(s==="FileSerializable")return e?.type==="array"?n==="parameter"?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":n==="parameter"?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}";if(s==="GallerySerializable")return n==="parameter"?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]"}function Ft(e,t){return t==="GallerySerializable"?"array of [file, label] tuples":t==="ListStringSerializable"?"array of strings":t==="FileSerializable"?"array of files or single file":e?.description}function Fe(e,t){switch(e.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:Ke,stage:"error",code:e.code,success:e.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:e.message,session_not_found:e.session_not_found,stage:"error",success:!1}};case"broken_connection":return{type:"broken_connection",status:{queue:!0,message:e.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:t||"pending",code:e.code,size:e.queue_size,position:e.rank,eta:e.rank_eta,success:e.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,progress_data:e.progress_data,success:e.success}};case"log":return{type:"log",data:e};case"process_generating":return{type:"generating",status:{queue:!0,message:e.success?null:e.output.error,stage:e.success?"generating":"error",code:e.code,progress_data:e.progress_data,eta:e.average_duration,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_streaming":return{type:"streaming",status:{queue:!0,message:e.output.error,stage:"streaming",time_limit:e.time_limit,code:e.code,progress_data:e.progress_data,eta:e.eta},data:e.output};case"process_completed":return"error"in e.output?{type:"update",status:{queue:!0,title:e.output.title??"Error",message:e.output.error??"An error occurred",visible:e.output.visible,duration:e.output.duration,stage:"error",code:e.code,success:e.success}}:{type:"complete",status:{queue:!0,message:e.success?void 0:e.output.error,stage:e.success?"complete":"error",code:e.code,progress_data:e.progress_data,changed_state_ids:e.success?e.output.changed_state_ids:void 0},data:e.success?e.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:e.code,size:e.rank,position:0,success:e.success,eta:e.eta},original_msg:"process_starts"}}return{type:"none",status:{stage:"error",queue:!0}}}const Gt=(e=[],t)=>{const s=t?t.parameters:[];if(Array.isArray(e))return t&&s.length>0&&e.length>s.length&&console.warn("Too many arguments provided for the endpoint."),e;const n=[],i=Object.keys(e);return s.forEach((r,o)=>{if(e.hasOwnProperty(r.parameter_name))n[o]=e[r.parameter_name];else if(r.parameter_has_default)n[o]=r.parameter_default;else throw new Error(`No value provided for required parameter: ${r.parameter_name}`)}),i.forEach(r=>{if(!s.some(o=>o.parameter_name===r))throw new Error(`Parameter \`${r}\` is not a valid keyword argument. Please refer to the API for usage.`)}),n.forEach((r,o)=>{if(r===void 0&&!s[o].parameter_has_default)throw new Error(`No value provided for required parameter: ${s[o].parameter_name}`)}),n};async function Ht(){if(this.api_info)return this.api_info;const{token:e}=this.options,{config:t}=this,s={"Content-Type":"application/json"};if(e&&(s.Authorization=`Bearer ${e}`),!!t)try{let n,i;if(typeof window<"u"&&window.gradio_api_info)i=window.gradio_api_info;else{const r=tt(t.root,this.api_prefix,vt);if(n=await this.fetch(r,{headers:s,credentials:"include"}),!n.ok)throw new Error(G);i=await n.json()}return"api"in i&&(i=i.api),i.named_endpoints["/predict"]&&!i.unnamed_endpoints[0]&&(i.unnamed_endpoints[0]=i.named_endpoints["/predict"]),Mt(i,t,this.api_map)}catch(n){throw new Error("Could not get API info. "+n.message)}}async function Jt(e,t,s){const n={};this?.options?.token&&(n.Authorization=`Bearer ${this.options.token}`);const i=1e3,r=[];let o;for(let a=0;a<t.length;a+=i){const l=t.slice(a,a+i),p=new FormData;l.forEach(c=>{p.append("files",c)});try{const c=s?`${e}${this.api_prefix}/${ze}?upload_id=${s}`:`${e}${this.api_prefix}/${ze}`;o=await this.fetch(c,{method:"POST",body:p,headers:n,credentials:"include"})}catch(c){throw new Error(G+c.message)}if(!o.ok){const c=await o.text();return{error:`HTTP ${o.status}: ${c}`}}const u=await o.json();u&&r.push(...u)}return{files:r}}const Vt={radix:1e3,unit:["b","kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]},Wt={radix:1024,unit:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"]},Zt={radix:1024,unit:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]},Ge={si:Vt,iec:Wt,jedec:Zt};function Kt(e,t=1,s="jedec"){e=Math.abs(e);const{radix:n,unit:i}=Ge[s]||Ge.jedec;let r=0;for(;e>=n;)e/=n,++r;return`${e.toFixed(t)} ${i[r]}`}async function Yt(e,t,s,n){let i=(Array.isArray(e)?e:[e]).map(o=>o.blob);const r=i.filter(o=>o.size>(n??1/0));if(r.length)throw new Error(`File(s) exceed the maximum allowed size of ${Kt(n||1/0)}: ${r.map(o=>`"${o.name}"`).join(", ")}`);return await Promise.all(await this.upload_files(t,i,s).then(async o=>{if(o.error)throw new Error(o.error);return o.files?o.files.map((a,l)=>new Q({...e[l],path:a,url:`${t}${this.api_prefix}/file=${a}`})):[]}))}async function Cs(e,t){return e.map(s=>new Q({path:s.name,orig_name:s.name,blob:s,size:s.size,mime_type:s.type,is_stream:t}))}class Q{path;url;orig_name;size;blob;is_stream;mime_type;alt_text;b64;meta={_type:"gradio.FileData"};constructor({path:t,url:s,orig_name:n,size:i,blob:r,is_stream:o,mime_type:a,alt_text:l,b64:p}){this.path=t,this.url=s,this.orig_name=n,this.size=i,this.blob=s?void 0:r,this.is_stream=o,this.mime_type=a,this.alt_text=l,this.b64=p}}class Qt{type;command;meta;fileData;constructor(t,s){this.type="command",this.command=t,this.meta=s}}typeof process<"u"&&process.versions&&process.versions.node;function He(e,t,s){for(;s.length>1;){const i=s.shift();if(typeof i=="string"||typeof i=="number")e=e[i];else throw new Error("Invalid key type")}const n=s.shift();if(typeof n=="string"||typeof n=="number")e[n]=t;else throw new Error("Invalid key type")}async function ae(e,t=void 0,s=[],n=!1,i=void 0){if(Array.isArray(e)){let r=[];return await Promise.all(e.map(async(o,a)=>{let l=s.slice();l.push(String(a));const p=await ae(e[a],n?i?.parameters[a]?.component||void 0:t,l,!1,i);r=r.concat(p)})),r}else{if(globalThis.Buffer&&e instanceof globalThis.Buffer||e instanceof Blob)return[{path:s,blob:new Blob([e]),type:t}];if(typeof e=="object"&&e!==null){let r=[];for(const o of Object.keys(e)){const a=[...s,o],l=e[o];r=r.concat(await ae(l,void 0,a,!1,i))}return r}}return[]}function Xt(e,t){let s=t?.dependencies?.find(n=>n.id==e)?.queue;return s!=null?!s:!t.enable_queue}function es(e,t){return new Promise((s,n)=>{const i=new MessageChannel;i.port1.onmessage=(({data:r})=>{i.port1.close(),s(r)}),window.parent.postMessage(e,t,[i.port2])})}function Z(e,t,s,n,i=!1){if(n==="input"&&!i)throw new Error("Invalid code path. Cannot skip state inputs for input.");if(n==="output"&&i)return e;let r=[],o=0;const a=n==="input"?t.inputs:t.outputs;for(let l=0;l<a.length;l++){const p=a[l];if(s.find(c=>c.id===p)?.type==="state"){if(i)if(e.length===a.length){const c=e[o];r.push(c),o++}else r.push(null);else{o++;continue}continue}else{const c=e[o];r.push(c),o++}}return r}async function ts(e,t,s){const n=this;await ss(n,t);const i=await ae(t,void 0,[],!0,s);return(await Promise.all(i.map(async({path:o,blob:a,type:l})=>{if(!a)return{path:o,type:l};const p=await n.upload_files(e,[a]),u=p.files&&p.files[0];return{path:o,file_url:u,type:l,name:typeof File<"u"&&a instanceof File?a?.name:void 0}}))).forEach(({path:o,file_url:a,type:l,name:p})=>{if(l==="Gallery")He(t,a,o);else if(a){const u=new Q({path:a,orig_name:p});He(t,u,o)}}),t}async function ss(e,t){if(!(e.config?.root||e.config?.root_url))throw new Error(Qe);await st(e,t)}async function st(e,t,s=[]){for(const n in t)t[n]instanceof Qt?await ns(e,t,n):typeof t[n]=="object"&&t[n]!==null&&await st(e,t[n],[...s,n])}async function ns(e,t,s){let n=t[s];const i=e.config?.root||e.config?.root_url;if(!i)throw new Error(Qe);try{let r,o;if(typeof process<"u"&&process.versions&&process.versions.node){const u=await K(()=>import("./__vite-browser-external-D7Ct-6yo.js").then(f=>f._),[],import.meta.url);o=(await K(()=>import("./__vite-browser-external-D7Ct-6yo.js").then(f=>f._),[],import.meta.url)).resolve(process.cwd(),n.meta.path),r=await u.readFile(o)}else throw new Error(xt);const a=new Blob([r],{type:"application/octet-stream"}),l=await e.upload_files(i,[a]),p=l.files&&l.files[0];if(p){const u=new Q({path:p,orig_name:n.meta.name||""});t[s]=u}}catch(r){console.error(Dt,r)}}async function is(e,t,s){const n={"Content-Type":"application/json"};this.options.token&&(n.Authorization=`Bearer ${this.options.token}`);try{var i=await this.fetch(e,{method:"POST",body:JSON.stringify(t),headers:{...n,...s},credentials:"include"})}catch{return[{error:G},500]}let r,o;try{r=await i.json(),o=i.status}catch(a){r={error:`Could not parse server response: ${a}`},o=500}return[r,o]}async function rs(e,t={}){let s=!1,n=!1;if(!this.config)throw new Error("Could not resolve app config");if(typeof e=="number")this.config.dependencies.find(i=>i.id==e);else{const i=e.replace(/^\//,"");this.config.dependencies.find(r=>r.id==this.api_map[i])}return new Promise(async(i,r)=>{const o=this.submit(e,t,null,null,!0);let a;for await(const l of o)l.type==="data"&&(n&&i(a),s=!0,a=l),l.type==="status"&&(l.stage==="error"&&r(l),l.stage==="complete"&&(n=!0,s&&i(a)))})}async function F(e,t,s){let n=t==="subdomain"?`https://huggingface.co/api/spaces/by-subdomain/${e}`:`https://huggingface.co/api/spaces/${e}`,i,r;try{if(i=await fetch(n),r=i.status,r!==200)throw new Error;i=await i.json()}catch{s({status:"error",load_status:"error",message:Tt,detail:"NOT_FOUND"});return}if(!i||r!==200)return;const{runtime:{stage:o},id:a}=i;switch(o){case"STOPPED":case"SLEEPING":s({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:o}),setTimeout(()=>{F(e,t,s)},1e3);break;case"PAUSED":s({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:o,discussions_enabled:await Je(a)});break;case"RUNNING":case"RUNNING_BUILDING":s({status:"running",load_status:"complete",message:"Space is running.",detail:o});break;case"BUILDING":s({status:"building",load_status:"pending",message:"Space is building...",detail:o}),setTimeout(()=>{F(e,t,s)},1e3);break;case"APP_STARTING":s({status:"starting",load_status:"pending",message:"Space is starting...",detail:o}),setTimeout(()=>{F(e,t,s)},1e3);break;default:s({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:o,discussions_enabled:await Je(a)});break}}const nt=async(e,t)=>{let s=0;const n=12,i=5e3;return new Promise(r=>{F(e,he.test(e)?"space_name":"subdomain",o=>{t(o),o.status==="running"||o.status==="error"||o.status==="paused"||o.status==="space_error"?r():(o.status==="sleeping"||o.status==="building")&&(s<n?(s++,setTimeout(()=>{nt(e,t).then(r)},i)):r())})})},os=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function Je(e){try{const t=await fetch(`https://huggingface.co/api/spaces/${e}/discussions`,{method:"HEAD"}),s=t.headers.get("x-error-message");return!(!t.ok||s&&os.test(s))}catch{return!1}}async function as(e,t){const s={};t&&(s.Authorization=`Bearer ${t}`);try{const n=await fetch(`https://huggingface.co/api/spaces/${e}/${Et}`,{headers:s});if(n.status!==200)throw new Error("Space hardware could not be obtained.");const{hardware:i}=await n.json();return i.current}catch(n){throw new Error(n.message)}}async function cs(e,t,s){const n={};s&&(n.Authorization=`Bearer ${s}`);const i={seconds:t};try{const r=await fetch(`https://huggingface.co/api/spaces/${e}/${St}`,{method:"POST",headers:{"Content-Type":"application/json",...n},body:JSON.stringify(i)});if(r.status!==200)throw new Error("Could not set sleep timeout on duplicated Space. Please visit *ADD HF LINK TO SETTINGS* to set a timeout manually to reduce billing charges.");return await r.json()}catch(r){throw new Error(r.message)}}const Ve=["cpu-basic","cpu-upgrade","cpu-xl","t4-small","t4-medium","a10g-small","a10g-large","a10g-largex2","a10g-largex4","a100-large","zero-a10g","h100","h100x8"];async function ls(e,t){const{token:s,private:n,hardware:i,timeout:r,auth:o}=t;if(i&&!Ve.includes(i))throw new Error(`Invalid hardware type provided. Valid types are: ${Ve.map(w=>`"${w}"`).join(",")}.`);const{http_protocol:a,host:l}=await fe(e,s);let p=null;if(o){const w=await Xe(a,l,o,fetch);w&&(p=et(w))}const u={Authorization:`Bearer ${s}`,"Content-Type":"application/json",...p?{Cookie:p.join("; ")}:{}},c=(await(await fetch("https://huggingface.co/api/whoami-v2",{headers:u})).json()).name,f=e.split("/")[1],m={repository:`${c}/${f}`};n&&(m.private=!0);let v;try{i||(v=await as(e,s))}catch(w){throw Error(pe+w.message)}const h=i||v||"cpu-basic";m.hardware=h;try{const w=await fetch(`https://huggingface.co/api/spaces/${e}/duplicate`,{method:"POST",headers:u,body:JSON.stringify(m)});if(w.status===409)try{return await Y.connect(`${c}/${f}`,t)}catch(q){throw console.error("Failed to connect Client instance:",q),q}else if(w.status!==200)throw new Error(w.statusText);const H=await w.json();return await cs(`${c}/${f}`,r||300,s),await Y.connect(us(H.url),t)}catch(w){throw new Error(w)}}function us(e){const t=/https:\/\/huggingface.co\/spaces\/([^/]+\/[^/]+)/,s=e.match(t);if(s)return s[1]}class ps extends TransformStream{#e="";constructor(t={allowCR:!1}){super({transform:(s,n)=>{for(s=this.#e+s;;){const i=s.indexOf(`
`),r=t.allowCR?s.indexOf("\r"):-1;if(r!==-1&&r!==s.length-1&&(i===-1||i-1>r)){n.enqueue(s.slice(0,r)),s=s.slice(r+1);continue}if(i===-1)break;const o=s[i-1]==="\r"?i-1:i;n.enqueue(s.slice(0,o)),s=s.slice(i+1)}this.#e=s},flush:s=>{if(this.#e==="")return;const n=t.allowCR&&this.#e.endsWith("\r")?this.#e.slice(0,-1):this.#e;s.enqueue(n)}})}}function hs(e){let t=new TextDecoderStream,s=new ps({allowCR:!0});return e.pipeThrough(t).pipeThrough(s)}function fs(e){let s=/[:]\s*/.exec(e),n=s&&s.index;if(n)return[e.substring(0,n),e.substring(n+s[0].length)]}function We(e,t,s){e.get(t)||e.set(t,s)}async function*ds(e,t){if(!e.body)return;let s=hs(e.body),n,i=s.getReader(),r;for(;;){if(t&&t.aborted)return i.cancel();if(n=await i.read(),n.done)return;if(!n.value){r&&(yield r),r=void 0;continue}let[o,a]=fs(n.value)||[];o==="data"?(r||={},r[o]=r[o]?r[o]+`
`+a:a):o==="event"?(r||={},r[o]=a):o==="id"?(r||={},r[o]=String(+a)===a?+a:a):o==="retry"&&(r||={},r[o]=+a||void 0)}}async function _s(e,t){let s=new Request(e,t);We(s.headers,"Accept","text/event-stream"),We(s.headers,"Content-Type","application/json");let n=await fetch(s);if(!n.ok)throw n;return ds(n,s.signal)}async function ms(){let{event_callbacks:e,unclosed_events:t,pending_stream_messages:s,stream_status:n,config:i,jwt:r}=this;const o=this;if(!i)throw new Error("Could not resolve app config");n.open=!0;let a=null,l=new URLSearchParams({session_hash:this.session_hash}).toString(),p=new URL(`${i.root}${this.api_prefix}/${Ze}?${l}`);if(r&&p.searchParams.set("__sign",r),a=this.stream(p),!a){console.warn("Cannot connect to SSE endpoint: "+p.toString());return}a.onmessage=async function(u){let c=JSON.parse(u.data);if(c.msg==="close_stream"){de(n,o.abort_controller);return}const f=c.event_id;if(!f)await Promise.all(Object.keys(e).map(m=>e[m](c)));else if(e[f]&&i){c.msg==="process_completed"&&["sse","sse_v1","sse_v2","sse_v2.1","sse_v3"].includes(i.protocol)&&t.delete(f);let m=e[f];typeof window<"u"&&typeof document<"u"?setTimeout(m,0,c):m(c)}else s[f]||(s[f]=[]),s[f].push(c)},a.onerror=async function(u){console.error(u),await Promise.all(Object.keys(e).map(c=>e[c]({msg:"broken_connection",message:G})))}}function de(e,t){e&&(e.open=!1,t?.abort())}function gs(e,t,s){!e[t]?(e[t]=[],s.data.forEach((i,r)=>{e[t][r]=i})):s.data.forEach((i,r)=>{let o=ws(e[t][r],i);e[t][r]=o,s.data[r]=o})}function ws(e,t){return t.forEach(([s,n,i])=>{e=ys(e,n,s,i)}),e}function ys(e,t,s,n){if(t.length===0){if(s==="replace")return n;if(s==="append")return e+n;throw new Error(`Unsupported action: ${s}`)}let i=e;for(let o=0;o<t.length-1;o++)i=i[t[o]];const r=t[t.length-1];switch(s){case"replace":i[r]=n;break;case"append":i[r]+=n;break;case"add":Array.isArray(i)?i.splice(Number(r),0,n):i[r]=n;break;case"delete":Array.isArray(i)?i.splice(Number(r),1):delete i[r];break;default:throw new Error(`Unknown action: ${s}`)}return e}function bs(e,t={}){const s={close:()=>{console.warn("Method not implemented.")},onerror:null,onmessage:null,onopen:null,readyState:0,url:e.toString(),withCredentials:!1,CONNECTING:0,OPEN:1,CLOSED:2,addEventListener:()=>{throw new Error("Method not implemented.")},dispatchEvent:()=>{throw new Error("Method not implemented.")},removeEventListener:()=>{throw new Error("Method not implemented.")}};return _s(e,t).then(async n=>{s.readyState=s.OPEN;try{for await(const i of n)s.onmessage&&s.onmessage(i);s.readyState=s.CLOSED}catch(i){s.onerror&&s.onerror(i),s.readyState=s.CLOSED}}).catch(n=>{console.error(n),s.onerror&&s.onerror(n),s.readyState=s.CLOSED}),s}function vs(e,t={},s,n,i,r){try{let o=function(_){(i||ct[_.type])&&u(_)},a=function(){for(ht=!0;B.length>0;)B.shift()({value:void 0,done:!0})},l=function(_){B.length>0?B.shift()(_):ie.push(_)},p=function(_){l(Es(_)),a()},u=function(_){l({value:_,done:!1})},c=function(){return ie.length>0?Promise.resolve(ie.shift()):new Promise(_=>B.push(_))};const{token:f}=this.options,{fetch:m,app_reference:v,config:h,session_hash:w,api_info:H,api_map:q,stream_status:X,pending_stream_messages:ee,pending_diff_streams:te,event_callbacks:se,unclosed_events:rt,post_data:ne,options:J,api_prefix:A}=this,_e=r||{"x-gradio-user":"api"},ot=this;if(!H)throw new Error("No API found");if(!h)throw new Error("Could not resolve app config");let{fn_index:d,endpoint_info:me,dependency:z}=Ss(H,e,q,h),at=Gt(t,me),j,O=h.protocol??"ws";if(O==="ws")throw new Error("WebSocket protocol is not supported in this version");let U="",Ts=()=>U;const g=typeof e=="number"?"/predict":e;let V,b=null,T=!1,ge={},M=typeof window<"u"&&typeof document<"u"?new URLSearchParams(window.location.search).toString():"";const ct=J?.events?.reduce((_,R)=>(_[R]=!0,_),{})||{};async function lt(){let _={},R={};_={event_id:b},R={event_id:b,session_hash:w,fn_index:d};try{if(!h)throw new Error("Could not resolve app config");"event_id"in R&&await m(`${h.root}${A}/${At}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(R)}),await m(`${h.root}${A}/${Rt}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(_)})}catch{console.warn("The `/reset` endpoint could not be called. Subsequent endpoint results may be unreliable.")}}const ut=async _=>{await this._resolve_heartbeat(_)};async function we(_){if(!h)return;let R=_.render_id;h.components=[...h.components.filter(E=>E.props.rendered_in!==R),..._.components],h.dependencies=[...h.dependencies.filter(E=>E.rendered_in!==R),..._.dependencies];const W=h.components.some(E=>E.type==="state"),y=h.dependencies.some(E=>E.targets.some(N=>N[1]==="unload"));h.connect_heartbeat=W||y,await ut(h),o({type:"render",data:_,endpoint:g,fn_index:d})}const pt=this.handle_blob(h.root,at,me).then(async _=>{if(V={data:Z(_,z,h.components,"input",!0)||[],event_data:s,fn_index:d,trigger_id:n},Xt(d,h))o({type:"status",endpoint:g,stage:"pending",queue:!1,fn_index:d,time:new Date}),ne(`${h.root}${A}/run${g.startsWith("/")?g:`/${g}`}${M?"?"+M:""}`,{...V,session_hash:w},_e).then(async([y,E])=>{const N=y.data;E==200?(o({type:"data",endpoint:g,fn_index:d,data:Z(N,z,h.components,"output",J.with_null_state),time:new Date,event_data:s,trigger_id:n}),y.render_config&&await we(y.render_config),o({type:"status",endpoint:g,fn_index:d,stage:"complete",eta:y.average_duration,queue:!1,time:new Date})):o({type:"status",stage:"error",endpoint:g,fn_index:d,message:y.error,queue:!1,time:new Date})}).catch(y=>{o({type:"status",stage:"error",message:y.message,endpoint:g,fn_index:d,queue:!1,time:new Date})});else if(O=="sse"){o({type:"status",stage:"pending",queue:!0,endpoint:g,fn_index:d,time:new Date});var W=new URLSearchParams({fn_index:d.toString(),session_hash:w}).toString();let y=new URL(`${h.root}${A}/${Ze}?${M?M+"&":""}${W}`);if(this.jwt&&y.searchParams.set("__sign",this.jwt),j=this.stream(y),!j)return Promise.reject(new Error("Cannot connect to SSE endpoint: "+y.toString()));j.onmessage=async function(E){const N=JSON.parse(E.data),{type:x,status:P,data:C}=Fe(N,ge[d]);if(x==="update"&&P&&!T)o({type:"status",endpoint:g,fn_index:d,time:new Date,...P}),P.stage==="error"&&(j?.close(),a());else if(x==="data"){let[L,D]=await ne(`${h.root}${A}/queue/data`,{...V,session_hash:w,event_id:b});D!==200&&(o({type:"status",stage:"error",message:G,queue:!0,endpoint:g,fn_index:d,time:new Date}),j?.close(),a())}else x==="complete"?T=P:x==="log"?o({type:"log",title:C.title,log:C.log,level:C.level,endpoint:g,duration:C.duration,visible:C.visible,fn_index:d}):(x==="generating"||x==="streaming")&&o({type:"status",time:new Date,...P,stage:P?.stage,queue:!0,endpoint:g,fn_index:d});C&&(o({type:"data",time:new Date,data:Z(C.data,z,h.components,"output",J.with_null_state),endpoint:g,fn_index:d,event_data:s,trigger_id:n}),T&&(o({type:"status",time:new Date,...T,stage:P?.stage,queue:!0,endpoint:g,fn_index:d}),j?.close(),a()))}}else if(O=="sse_v1"||O=="sse_v2"||O=="sse_v2.1"||O=="sse_v3"){o({type:"status",stage:"pending",queue:!0,endpoint:g,fn_index:d,time:new Date});let y="";typeof window<"u"&&typeof document<"u"&&(y=window?.location?.hostname);const N=y.includes(".dev.")?`https://moon-${y.split(".")[1]}.dev.spaces.huggingface.tech`:"https://huggingface.co";return(typeof window<"u"&&typeof document<"u"&&window.parent!=window&&window.supports_zerogpu_headers?es("zerogpu-headers",N):Promise.resolve(null)).then(L=>{const D={..._e,...L||{}};return ne(`${h.root}${A}/${yt}?${M}`,{...V,session_hash:w},D)}).then(async([L,D])=>{if(L.event_id&&(U=L.event_id),D===503)o({type:"status",stage:"error",message:Ke,queue:!0,endpoint:g,fn_index:d,time:new Date,visible:!0});else if(D===422)o({type:"status",stage:"error",message:L.detail,queue:!0,endpoint:g,fn_index:d,code:"validation_error",time:new Date,visible:!0}),a();else if(D!==200)o({type:"status",stage:"error",broken:!1,message:L.detail,queue:!0,endpoint:g,fn_index:d,time:new Date,visible:!0});else{b=L.event_id,U=b;let be=async function(re){try{const{type:S,status:$,data:k,original_msg:ft}=Fe(re,ge[d]);if(S=="heartbeat")return;if(S==="update"&&$&&!T)o({type:"status",endpoint:g,fn_index:d,time:new Date,original_msg:ft,...$});else if(S==="complete")T=$;else if(S=="unexpected_error"||S=="broken_connection"){console.error("Unexpected error",$?.message);const dt=S==="broken_connection";o({type:"status",stage:"error",message:$?.message||"An Unexpected Error Occurred!",queue:!0,endpoint:g,broken:dt,session_not_found:$?.session_not_found,fn_index:d,time:new Date})}else if(S==="log"){o({type:"log",title:k.title,log:k.log,level:k.level,endpoint:g,duration:k.duration,visible:k.visible,fn_index:d});return}else(S==="generating"||S==="streaming")&&(o({type:"status",time:new Date,...$,stage:$?.stage,queue:!0,endpoint:g,fn_index:d}),k&&z.connection!=="stream"&&["sse_v2","sse_v2.1","sse_v3"].includes(O)&&gs(te,b,k));k&&(o({type:"data",time:new Date,data:Z(k.data,z,h.components,"output",J.with_null_state),endpoint:g,fn_index:d}),k.render_config&&await we(k.render_config),T&&(o({type:"status",time:new Date,...T,stage:$?.stage,queue:!0,endpoint:g,fn_index:d}),a())),($?.stage==="complete"||$?.stage==="error")&&(se[b]&&delete se[b],b in te&&delete te[b])}catch(S){console.error("Unexpected client exception",S),o({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:g,fn_index:d,time:new Date}),["sse_v2","sse_v2.1","sse_v3"].includes(O)&&(de(X,ot.abort_controller),X.open=!1,a())}};b in ee&&(ee[b].forEach(re=>be(re)),delete ee[b]),se[b]=be,rt.add(b),X.open||await this.open_stream()}})}});let ht=!1;const ie=[],B=[],ye={[Symbol.asyncIterator]:()=>ye,next:c,throw:async _=>(p(_),c()),return:async()=>(a(),{value:void 0,done:!0}),cancel:lt,send_chunk:_=>{this.post_data(`${h.root}${A}/stream/${U}`,{..._,session_hash:this.session_hash})},close_stream:()=>{this.post_data(`${h.root}${A}/stream/${U}/close`,{}),a()},event_id:()=>U,wait_for_id:async()=>(await pt,b)};return ye}catch(o){throw console.error("Submit function encountered an error:",o),o}}function Es(e){return{then:(t,s)=>s(e)}}function Ss(e,t,s,n){let i,r,o;if(typeof t=="number")i=t,r=e.unnamed_endpoints[i],o=n.dependencies.find(a=>a.id==t);else{const a=t.replace(/^\//,"");i=s[a],r=e.named_endpoints[t.trim()],o=n.dependencies.find(l=>l.id==s[a])}if(typeof i!="number")throw new Error("There is no endpoint matching that name of fn_index matching that number.");return{fn_index:i,endpoint_info:r,dependency:o}}class Y{app_reference;options;deep_link=null;config;api_prefix="";api_info;api_map={};session_hash=Math.random().toString(36).substring(2);jwt=!1;last_status={};cookies=null;stream_status={open:!1};closed=!1;pending_stream_messages={};pending_diff_streams={};event_callbacks={};unclosed_events=new Set;heartbeat_event=null;abort_controller=null;stream_instance=null;current_payload;get_url_config(t=null){if(!this.config)throw new Error(I);t===null&&(t=window.location.href);const s=o=>o.replace(/^\/+|\/+$/g,"");let n=s(new URL(this.config.root).pathname),i=s(new URL(t).pathname),r;return i.startsWith(n)?r=s(i.substring(n.length)):r="",this.get_page_config(r)}get_page_config(t){if(!this.config)throw new Error(I);let s=this.config;return t in s.page||(t=""),{...s,current_page:t,layout:s.page[t].layout,components:s.components.filter(n=>s.page[t].components.includes(n.id)),dependencies:this.config.dependencies.filter(n=>s.page[t].dependencies.includes(n.id))}}fetch(t,s){const n=new Headers(s?.headers||{});return this&&this.cookies&&n.append("Cookie",this.cookies),this&&this.options.headers&&new Headers(this.options.headers).forEach((r,o)=>{n.append(o,r)}),fetch(t,{...s,headers:n})}stream(t){const s=new Headers;return this&&this.cookies&&s.append("Cookie",this.cookies),this&&this.options.headers&&new Headers(this.options.headers).forEach((i,r)=>{s.append(r,i)}),this&&this.options.token&&s.append("Authorization",`Bearer ${this.options.token}`),this.abort_controller=new AbortController,this.stream_instance=bs(t.toString(),{credentials:"include",headers:s,signal:this.abort_controller.signal}),this.stream_instance}view_api;upload_files;upload;handle_blob;post_data;submit;predict;open_stream;resolve_config;resolve_cookies;constructor(t,s={events:["data"]}){this.app_reference=t,this.deep_link=s.query_params?.deep_link||null,s.events||(s.events=["data"]),this.options=s,this.current_payload={},this.view_api=Ht.bind(this),this.upload_files=Jt.bind(this),this.handle_blob=ts.bind(this),this.post_data=is.bind(this),this.submit=vs.bind(this),this.predict=rs.bind(this),this.open_stream=ms.bind(this),this.resolve_config=jt.bind(this),this.resolve_cookies=qt.bind(this),this.upload=Yt.bind(this),this.fetch=this.fetch.bind(this),this.handle_space_success=this.handle_space_success.bind(this),this.stream=this.stream.bind(this)}async init(){this.options.auth&&await this.resolve_cookies(),await this._resolve_config().then(({config:t})=>this._resolve_heartbeat(t)),this.api_info=await this.view_api(),this.api_map=It(this.config?.dependencies||[])}async _resolve_heartbeat(t){if(t&&(this.config=t,this.api_prefix=t.api_prefix||"",this.config&&this.config.connect_heartbeat&&this.config.space_id&&this.options.token&&(this.jwt=await Be(this.config.space_id,this.options.token,this.cookies))),t.space_id&&this.options.token&&(this.jwt=await Be(t.space_id,this.options.token)),this.config&&this.config.connect_heartbeat){const s=new URL(`${this.config.root}${this.api_prefix}/${$t}/${this.session_hash}`);this.jwt&&s.searchParams.set("__sign",this.jwt),this.heartbeat_event||(this.heartbeat_event=this.stream(s))}}static async connect(t,s={events:["data"]}){const n=new this(t,s);return s.session_hash&&(n.session_hash=s.session_hash),await n.init(),n}async reconnect(){const t=new URL(`${this.config.root}${this.api_prefix}/${Ot}`);let s;try{const n=await this.fetch(t);if(!n.ok)throw new Error;s=(await n.json()).app_id}catch{return"broken"}return s!==this.config.app_id?"changed":"connected"}close(){this.closed=!0,de(this.stream_status,this.abort_controller)}set_current_payload(t){this.current_payload=t}static async duplicate(t,s={events:["data"]}){return ls(t,s)}async _resolve_config(){const{http_protocol:t,host:s,space_id:n}=await fe(this.app_reference,this.options.token),{status_callback:i}=this.options;n&&i&&await nt(n,i);let r;try{let o=`${t}//${s}`;if(r=await this.resolve_config(o),!r)throw new Error(I);return this.config_success(r)}catch(o){if(n&&i)F(n,he.test(n)?"space_name":"subdomain",this.handle_space_success);else throw i&&i({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),Error(o)}}async config_success(t){if(this.config=t,this.api_prefix=t.api_prefix||"",this.config.auth_required)return this.prepare_return_obj();try{this.api_info=await this.view_api()}catch(s){console.error(Pt+s.message)}return this.prepare_return_obj()}async handle_space_success(t){if(!this)throw new Error(I);const{status_callback:s}=this.options;if(s&&s(t),t.status==="running")try{if(this.config=await this._resolve_config(),this.api_prefix=this?.config?.api_prefix||"",!this.config)throw new Error(I);return await this.config_success(this.config)}catch(n){throw s&&s({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),n}}async component_server(t,s,n){if(!this.config)throw new Error(I);const i={},{token:r}=this.options,{session_hash:o}=this;r&&(i.Authorization=`Bearer ${this.options.token}`);let a,l=this.config.components.find(u=>u.id===t);l?.props?.root_url?a=l.props.root_url:a=this.config.root;let p;if("binary"in n){p=new FormData;for(const u in n.data)u!=="binary"&&p.append(u,n.data[u]);p.set("component_id",t.toString()),p.set("fn_name",s),p.set("session_hash",o)}else p=JSON.stringify({data:n,component_id:t,fn_name:s,session_hash:o}),i["Content-Type"]="application/json";r&&(i.Authorization=`Bearer ${r}`);try{const u=await this.fetch(`${a}${this.api_prefix}/${kt}/`,{method:"POST",body:p,headers:i,credentials:"include"});if(!u.ok)throw new Error("Could not connect to component server: "+u.statusText);return await u.json()}catch(u){console.warn(u)}}set_cookies(t){this.cookies=et(t).join("; ")}prepare_return_obj(){return{config:this.config,predict:this.predict,submit:this.submit,view_api:this.view_api,component_server:this.component_server}}}const $s=typeof window<"u";if($s){const e={};e.svelte={};for(const t in ve)e.svelte[t]=ve[t];e.svelte_animate={};for(const t in Se)e.svelte_animate[t]=Se[t];e.svelte_attachments={};for(const t in $e)e.svelte_attachments[t]=$e[t];e.svelte_easing={};for(const t in ke)e.svelte_easing[t]=ke[t];e.svelte_internal_client={};for(const t in Re)e.svelte_internal_client[t]=Re[t];e.svelte_internal_flags_async={};for(const t in Ae)e.svelte_internal_flags_async[t]=Ae[t];e.svelte_internal_flags_legacy={};for(const t in Oe)e.svelte_internal_flags_legacy[t]=Oe[t];e.svelte_internal_flags_tracing={};for(const t in Te)e.svelte_internal_flags_tracing[t]=Te[t];e.svelte_internal_server={};for(const t in Pe)e.svelte_internal_server[t]=Pe[t];e.svelte_legacy={};for(const t in Ce)e.svelte_legacy[t]=Ce[t];e.svelte_motion={};for(const t in Le)e.svelte_motion[t]=Le[t];e.svelte_reactivity={};for(const t in Ne)e.svelte_reactivity[t]=Ne[t];e.svelte_reactivity_window={};for(const t in xe)e.svelte_reactivity_window[t]=xe[t];e.svelte_server={};for(const t in De)e.svelte_server[t]=De[t];e.svelte_store={};for(const t in Ie)e.svelte_store[t]=Ie[t];e.svelte_transition={};for(const t in je)e.svelte_transition[t]=je[t];e.svelte_events={};for(const t in Ue)e.svelte_events[t]=Ue[t];window.__gradio__svelte__=e,window.__gradio__svelte__.globals={},window.globals=window}const ks="./assets/index-DFvhBcYp.css";let ce;ce=[];let le,ue,it,Rs=new Promise(e=>{it=e});async function As(){const e=await Promise.all([K(()=>import("./Index-DESi4qmn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url),K(()=>import("./index-DZp2jo3y.js"),__vite__mapDeps([11,1,2,12,13,14]),import.meta.url)]);le=e[0].default,ue=e[1].mount_css,it()}function Os(){class e extends HTMLElement{control_page_title;initial_height;is_embed;container;info;autoscroll;eager;theme_mode;host;space;src;app;loading;updating;constructor(){super(),this.host=this.getAttribute("host"),this.space=this.getAttribute("space"),this.src=this.getAttribute("src"),this.control_page_title=this.getAttribute("control_page_title"),this.initial_height=this.getAttribute("initial_height")??"300px",this.is_embed=this.getAttribute("embed")??"true",this.container=this.getAttribute("container")??"true",this.info=this.getAttribute("info")??!0,this.autoscroll=this.getAttribute("autoscroll"),this.eager=this.getAttribute("eager"),this.theme_mode=this.getAttribute("theme_mode"),this.updating=!1,this.loading=!1}async connectedCallback(){await As(),this.loading=!0,this.app&&this.app.$destroy(),typeof ce!="string"&&ce.forEach(r=>ue(r,document.head)),await ue(ks,document.head);const s=new CustomEvent("domchange",{bubbles:!0,cancelable:!1,composed:!0});new MutationObserver(r=>{this.dispatchEvent(s)}).observe(this,{childList:!0});const i={target:this,props:{space:this.space?this.space.trim():this.space,src:this.src?this.src.trim():this.src,info:this.info!=="false",container:this.container!=="false",is_embed:this.is_embed!=="false",initial_height:this.initial_height,eager:this.eager==="true",version:"6-4-0",theme_mode:this.theme_mode,autoscroll:this.autoscroll==="true",control_page_title:this.control_page_title==="true",Client:Y,app_mode:window.__gradio_mode__==="app"}};this.app=Ee(le,i),this.updating&&this.setAttribute(this.updating.name,this.updating.value),this.loading=!1}static get observedAttributes(){return["src","space","host"]}async attributeChangedCallback(s,n,i){if(await Rs,(s==="host"||s==="space"||s==="src")&&i!==n){if(this.updating={name:s,value:i},this.loading)return;this.app&&_t(this.app),this.space=null,this.host=null,this.src=null,s==="host"?this.host=i:s==="space"?this.space=i:s==="src"&&(this.src=i);const r={target:this,props:{space:this.space?this.space.trim():this.space,src:this.src?this.src.trim():this.src,info:this.info!=="false",container:this.container!=="false",is_embed:this.is_embed!=="false",initial_height:this.initial_height,eager:this.eager==="true",version:"6-4-0",theme_mode:this.theme_mode,autoscroll:this.autoscroll==="true",control_page_title:this.control_page_title==="true",Client:Y,app_mode:window.__gradio_mode__==="app"}};this.app=Ee(le,r),this.updating=!1}}}customElements.get("gradio-app")||customElements.define("gradio-app",e)}Os();export{Q as F,K as _,Cs as p};
