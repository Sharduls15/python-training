import"./svelte/svelte_internal_flags_async.js";import*as r from"./svelte/svelte_internal_client.js";import{tick as U}from"./svelte/svelte_svelte.js";import{B as k,U as z}from"./ScrollFade-Df4eOX7N.js";import"./svelte/svelte_internal_flags_legacy.js";import"./i18n-BSEU4Bba.js";import{G as A}from"./utils.svelte-kG009vb9.js";import C from"./Gallery-BgDQu3Dc.js";import{S as P}from"./StreamingBar-Ck4VV0Q5.js";import{BaseFileUpload as j}from"./Index-Dbdac7Va.js";import{default as _e}from"./Example-CR6Oggaq.js";import"./MarkdownCode-B3eIh5Gl.js";import"./index-Iu0hi-Ff.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./prism-python-BCCznRiZ.js";import"./ShareButton-c50NWbgM.js";import"./FullscreenButton-D5DJ9370.js";import"./ModifyUpload-BBImu3IT.js";import"./Image-Bdf4wQSw.js";import"./ImagePreview-BoIZsleR.js";import"./Video-BrnW2L40.js";import"./index-tFQomdd2.js";import"./Example-CPmG5Ezd.js";var F=r.from_html("<!> <!>",1);function he(_,m){r.push(m,!0);let n=r.state(void 0);class f extends A{async get_data(){return r.get(n)&&(await r.get(n),await U()),await super.get_data()}}const v=r.rest_props(m,["$$slots","$$events","$$legacy"]),e=new f(v,{selected_index:null});let u=r.state(!1),w=r.derived(()=>e.props.value===null?!0:e.props.value.length===0);function y(a){if(!e.props.value)return;const{index:l}=a.detail;e.dispatch("delete",a.detail),e.props.value=e.props.value.filter((o,p)=>p!==l),e.dispatch("change",e.props.value)}async function g(a){return(await Promise.all(a.map(async o=>{if(o.path?.toLowerCase().endsWith(".svg")&&o.url){const d=await(await fetch(o.url)).text();return{...o,url:`data:image/svg+xml,${encodeURIComponent(d)}`}}return o}))).map(o=>o.mime_type?.includes("video")?{video:o,caption:null}:{image:o,caption:null})}{let a=r.derived(()=>typeof e.props.height=="number"?e.props.height:void 0);k(_,{get visible(){return e.shared.visible},variant:"solid",padding:!1,get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},allow_overflow:!1,get height(){return r.get(a)},get fullscreen(){return r.get(u)},set fullscreen(l){r.set(u,l,!0)},children:(l,o)=>{var p=F(),d=r.first_child(p);P(d,r.spread_props({get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n}},()=>e.shared.loading_status,{on_clear_status:()=>e.dispatch("clear_status",e.shared.loading_status)}));var b=r.sibling(d,2);{var $=i=>{j(i,{value:null,get root(){return e.shared.root},get label(){return e.shared.label},get max_file_size(){return e.shared.max_file_size},file_count:"multiple",get file_types(){return e.props.file_types},get i18n(){return e.i18n},upload:(...s)=>e.shared.client.upload(...s),stream_handler:(...s)=>e.shared.client.stream(...s),onupload:async s=>{const c=Array.isArray(s)?s:[s];e.props.value=await g(c),e.dispatch("upload",e.props.value),e.dispatch("change",e.props.value)},onerror:s=>{e.shared.loading_status=e.shared.loading_status||{},e.shared.loading_status.status="error",e.dispatch("error",s)},get upload_promise(){return r.get(n)},set upload_promise(s){r.set(n,s,!0)},children:(s,c)=>{z(s,{get i18n(){return e.i18n},type:"gallery"})},$$slots:{default:!0}})},x=i=>{{let s=r.derived(()=>e.props.buttons.some(t=>typeof t=="string"&&t==="share")),c=r.derived(()=>e.props.buttons.some(t=>typeof t=="string"&&t==="download")),G=r.derived(()=>e.props.buttons.some(t=>typeof t=="string"&&t==="fullscreen"));C(i,{onchange:()=>e.dispatch("change"),onclear:()=>e.dispatch("change"),onselect:t=>e.dispatch("select",t),onshare:t=>e.dispatch("share",t.detail),onerror:t=>e.dispatch("error",t.detail),onpreview_open:()=>{e.dispatch("preview_open")},onpreview_close:()=>e.dispatch("preview_close"),onfullscreen:({detail:t})=>{r.set(u,t,!0)},ondelete:y,onupload:async t=>{const B=Array.isArray(t)?t:[t],h=await g(B);e.props.value=e.props.value?[...e.props.value,...h]:h,e.dispatch("upload",h),e.dispatch("change",e.props.value)},get label(){return e.shared.label},get show_label(){return e.shared.show_label},get columns(){return e.props.columns},get rows(){return e.props.rows},get height(){return e.props.height},get preview(){return e.props.preview},get object_fit(){return e.props.object_fit},get interactive(){return e.shared.interactive},get allow_preview(){return e.props.allow_preview},get show_share_button(){return r.get(s)},get show_download_button(){return r.get(c)},get fit_columns(){return e.props.fit_columns},get i18n(){return e.i18n},_fetch:(...t)=>e.shared.client.fetch(...t),get show_fullscreen_button(){return r.get(G)},get buttons(){return e.props.buttons},on_custom_button_click:t=>{e.dispatch("custom_button_click",{id:t})},get fullscreen(){return r.get(u)},get root(){return e.shared.root},get file_types(){return e.props.file_types},get max_file_size(){return e.shared.max_file_size},upload:(...t)=>e.shared.client.upload(...t),stream_handler:(...t)=>e.shared.client.stream(...t),get selected_index(){return e.props.selected_index},set selected_index(t){e.props.selected_index=t},get value(){return e.props.value},set value(t){e.props.value=t}})}};r.if(b,i=>{e.shared.interactive&&r.get(w)?i($):i(x,!1)})}r.append(l,p)},$$slots:{default:!0}})}r.pop()}export{_e as BaseExample,C as BaseGallery,he as default};
